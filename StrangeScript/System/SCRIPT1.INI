[script]
n0=;on 1:PING: { msg #COS $time I've been pinged by the server again | return }
n1=on ^1:PONG: { haltdef | $report(Server,$1,PONG,with message,$2-).status | halt }
n2=on ^*:KICK:#: {
n3=  haltdef
n4=  $report(Kick,$nick,$chan,$knick,$1-).chan
n5=  if ($master(settings,extra.info) == ON) { $report(Kick,$nick,$chan,$knick,$1-).status }
n6=  if ($nick == $me) {  kick.T | kick.Y | .timerMyKick. $+ $network 1 2 /say.kicka $chan(#) }
n7=  else { kick.T | .timerSKick. $+ $network 1 2 /say.kickb $chan(#) }
n8=  if ($knick == $nick) { halt }
n9=  if ($knick == $me) { 
n10=    if ($nick == $server) { if ($key(settings,ircx) == ON) { .raw join $chan $key($chan,ownerkey) | halt } | else { halt } }
n11=    if ($nick == System) && ($key(settings,ircx) == ON) { .raw join $chan $key($chan,ownerkey) | halt }
n12=    if ($nick == ChanServ) && ($key(settings,ircx) == OFF) { halt }
n13=    if ($nick == ChanServ@services.dal.net) && ($network == Dalnet) { halt }
n14=    if ($nick == ChanServ) { halt }
n15=    if ($key(settings,deop.protect) == OFF) { .raw join # $key(#,ownerkey) |  halt }
n16=    if ($sock(*) == $null) { keywrite settings boom.sock.chan # | keywrite settings boom.sock.nick $nick | Boom }
n17=    if ($sock(*) != $null) { sw ALL join $chan $key(#,ownerkey) }
n18=    rumble on
n19=    if ($key(settings,ircx) == ON) { sw all access # clear }
n20=    if ($address($nick,4) != $address($me,4)) { sw all mode # -o-o-o-o-o-o $ial($address($nick,4),1).nick $ial($address($nick,4),2).nick $ial($address($nick,4),3).nick $ial($address($nick,4),4).nick $ial($address($nick,4),5).nick $ial($address($nick,4),6).nick | sw all mode # -o-o-o-o-o-o $ial($address($nick,4),7).nick $ial($address($nick,4),8).nick $ial($address($nick,4),9).nick $ial($address($nick,4),10).nick $ial($address($nick,4),11).nick $ial($address($nick,4),12).nick }
n21=    if ($key(settings,ircx) == ON) { sw all access # add owner $address($me,4) }
n22=    .raw join # $key(#,ownerkey)
n23=    sw all mode # +q $me
n24=    sw all join # $key(#,ownerkey)
n25=    if ($address($nick,2) != $address($me,2)) { .raw mode # -o-o-o-o-o-o $ial($address($nick,2),1).nick $ial($address($nick,2),2).nick $ial($address($nick,2),3).nick $ial($address($nick,2),4).nick $ial($address($nick,2),5).nick $ial($address($nick,2),6).nick | .raw mode # -o-o-o-o-o-o $ial($address($nick,2),7).nick $ial($address($nick,2),8).nick $ial($address($nick,2),9).nick $ial($address($nick,2),10).nick $ial($address($nick,2),11).nick $ial($address($nick,2),12).nick }
n26=    .kick # $nick Big mistake
n27=    keywrite settings killonops.nick $nick | keywrite settings killonops.chan #
n28=    if ($key(#,deop) != PROTECT) { keywrite # ownerkey $newkey }
n29=    if ($key(settings,ircx) == ON) { .prop # ownerkey $key(#,ownerkey) }
n30=    if ($address($nick,2) != $address($me,2)) { keywrite settings shithead $addtok($key(settings,shithead),$address($nick,4),44) | keywrite settings shitheadlast $address($nick,4) }
n31=    .flood on
n32=    .timerMFlud. $+ $network 1 30 .flood off
n33=    ;unset $chan(#)
n34=    halt
n35=  }
n36=  else {
n37=    if ($knick == $sock(@boom [ $+ [ $remove($gettok($knick,2,91),$chr(93)) ] ] ).mark) {
n38=      if ($sock(@boom [ $+ [ $remove($gettok($knick,2,91),$chr(93)) ] ] ) != $null) {
n39=        sw $remove($gettok($knick,2,91),$chr(93)) part # $crlf join #  $key(#,ownerkey)
n40=        if ($istok($key(settings,botnick),$nick,44) == $true) { sw $remove($gettok($knick,2,91),$chr(93)) privmsg # :Fucking Bot | halt }
n41=        elseif ($nick == $me) { sw $remove($gettok($knick,2,91),$chr(93)) privmsg # : $+ $master(settings,socksay) | halt }
n42=        else { if ($address($nick,4) != $address($me,4)) { sw all access # add host $address($nick,4) | sw $remove($gettok($knick,2,91),$chr(93)) mode # -o $nick | halt } }
n43=      }
n44=    }
n45=    if ($nick isowner $chan(#)) { HALT } 
n46=    if ($key(#,kicklock) != ON) { HALT }
n47=    if ($key(#,kicklock) == ON) {
n48=      .raw mode # -o $nick
n49=      .invite $knick #
n50=      .msg # $lowcol $+ NO KICKING ALLOWED 
n51=      halt
n52=    }
n53=  }
n54=}
n55=raw prop:*: {
n56=  ;if ($nick == $chr(42)) { halt }
n57=  echo -t $1 $sys $report(Prop,$nick,$1,$2,$3-)
n58=  if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Prop,$nick,$1,$2,$3-).status } }
n59=  if ($key($1,deop) == $null) { keywrite $1 deop OFF }
n60=  if ($key($1,modemaster) == $null) { keywrite $1 modemaster OFF }
n61=  if ($2 == OWNERKEY) {
n62=    if ($nick == $chr(42)) { halt }
n63=    if ($nick == $me) && ($key($1,ownerkey) == $3) { halt }
n64=    if ($nick == $me) && ($key($1,ownerkey) != $3) { keywrite $1 ownerkey $3 | halt }
n65=    if ($nick != $me) {
n66=      if ($key($1,ownerkey) == $null) { keywrite $1 ownerkey $3 | halt }
n67=      if ($key($1,ownerkey) != $null) && ($key($1,ownerkey) == $3) { halt }
n68=      if ($key($1,ownerkey) != $null) && ($key($1,ownerkey) != $3) {
n69=        if ($key($1,deop) == OFF) {
n70=          if ($3 != $null) { keywrite $1 ownerkey $3 }
n71=          if ($3 == $null) { .timerNULPROP. $+ $network 1 1 prop $1 $2 $key($1,ownerkey) | $report(Key Watch,$nick,$1,$2,Null key reverted).status }
n72=        }
n73=        if ($key($1,deop) == PROTECT) {
n74=          ;if ($3 != $null) { keywrite $1 ownerkey $3 }
n75=          ;if ($3 == $null) { .timerNULPROP. $+ $network 1 1 prop $1 $2 $key($1,ownerkey) | $report(Key Watch,$nick,$1,$2,Null key reverted).status }
n76=        }
n77=        if ($key($1,deop) == ON) { 
n78=          if ($key($1,modemaster) == OFF) { .timerFIXPROP. $+ $network 1 1 prop $1 $2 $key($1,ownerkey) | halt }
n79=          if ($key($1,modemaster) == ON) {
n80=            .raw mode $1 -o $nick
n81=            .timerFIXPROP. $+ $network 1 1 .prop $1 $2 $key($1,ownerkey)
n82=            echo -t $1 $sys 10 $+ $chr(91) $+ $bright $+ System  Warning $+ 10 $+ $chr(93) $+ : $lowcol $+ The $highcol $+ $2 $lowcol $+ for $highcol $+ $1 $lowcol $+ has been changed to $highcol $+ $3 $lowcol $+ by $highcol $+ $nick $bright $+ CORRECTING
n83=            if ($sock(*) == $null) { keywrite settings boom.sock.chan $1 | keywrite settings boom.sock.nick $nick | boom | .timerFIREC3. $+ $network 1 1 /sw ALL prop $1 OWNERKEY $key($1,ownerkey) }
n84=            if ($sock(*) != $null) { sockwrite -n * join $1 $key($1,ownerkey) $+ $cr $+ mode $1 -o $nick | .timerDOME. $+ $network 1 1  sockwrite -n * mode # +o+q $me $me  $+ $cr $+ prop $1 OWNERKEY $key($1,ownerkey) }
n85=            keywrite settings rumble ON
n86=            .access $1 clear
n87=            .timerRUMBLE. $+ $network 1 30 keywrite settings rumble OFF
n88=            .timerRUMSAY. $+ $network 1 30 $report(Rumble Mode,$null,$null,Reset,OFF).status
n89=          }
n90=        }
n91=      }
n92=    }
n93=    halt
n94=  }
n95=  if ($2 == HOSTKEY) {
n96=    if ($nick == $chr(42)) { halt }
n97=    if ($nick == $me) && ($key($1,hostkey) == $3) { halt }
n98=    if ($nick == $me) && ($key($1,hostkey) != $3) { keywrite $1 hostkey $3 | halt }
n99=    if ($nick != $me) {
n100=      if ($key($1,ownerkey) == $null) { keywrite $1 ownerkey $3 | halt }
n101=      if ($key($1,ownerkey) != $null) && ($key($1,hostkey) == $null) { keywrite $1 hostkey $3 | halt }
n102=      if ($key($1,ownerkey) != $null) && ($key($1,hostkey) != $null) && ($key($1,hostkey) == $3) { halt }
n103=      if ($key($1,ownerkey) != $null) && ($key($1,hostkey) != $null) && ($key($1,hostkey) != $3) { keywrite $1 hostkey $3 }
n104=      halt
n105=    }
n106=  }
n107=  if ($2 == ONJOIN) && ($me isowner $chan($1)) {
n108=    if ($nick == $chr(42)) { halt }
n109=    if ($nick == $me) && ($key($1,onjoin) == $3-) { halt }
n110=    if ($nick == $me) && ($key($1,onjoin) != $3-) { keywrite $1 onjoin $hex.ini($3-) | halt }
n111=    if ($nick isowner $chan($1)) { keywrite $1 onjoin $hex.ini($3-) | halt }
n112=    if ($nick != $me) && ($key($1,onjoin) == $3-) { halt }
n113=    if ($nick != $me) && ($key($1,onjoin) == $null) { var %tmp = $key($1,onjoin) | .prop $1 $2 : $+ $unhex.ini(%tmp) | halt }
n114=    if ($nick != $me) && ($key($1,onjoin) != $null) { 
n115=      $report(System  Warning,$2,$1,has been changed to $3- by $nick,CORRECTING).active
n116=      .mode $1 -o $nick
n117=      var %tmp = $key($1,onjoin)
n118=      .prop $1 $2 : $+ $unhex.ini(%tmp)
n119=      halt
n120=    }
n121=  }
n122=  if ($2 == ONPART) && ($me isowner $chan($1)) {
n123=    if ($nick == $chr(42)) { halt }
n124=    if ($nick == $me) && ($key($1,onpart) == $3-) { halt }
n125=    if ($nick == $me) && ($key($1,onpart) != $3-) { keywrite $1 onpart $hex.ini($3-) | halt }
n126=    if ($nick isowner $chan($1)) { keywrite $1 onpart $hex.ini($3-) | halt }
n127=    if ($nick != $me) && ($key($1,onpart) == $3-) { halt }
n128=    if ($nick != $me) && ($key($1,onpart) == $null) { var %tmp = $key($1,onpart) | .prop $1 $2 : $+ $unhex.ini(%tmp) | halt }
n129=    if ($nick != $me) && ($key($1,onpart) != $null) { 
n130=      $report(System  Warning,$2,$1,has been changed to $3- by $nick,CORRECTING).active
n131=      .mode $1 -o $nick
n132=      var %tmp = $key($1,onpart)
n133=      .prop $1 $2 : $+ $unhex.ini(%tmp)
n134=      halt
n135=    }
n136=  }
n137=  halt
n138=}
n139=on 1:ACTION:*:#: {
n140=  if (went away isin $1-) && ($istok(%away.users.nick,$nick,46) == $false) {
n141=    set %away.users.nick $addtok(%away.users.nick,$nick,46)
n142=    .timerlogcolor. $+ $network 1 10 login.color.nick
n143=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY)
n144=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,%tmp.aw),$nick,has been set as being,AWAY).status } }
n145=    halt
n146=  }
n147=  if (still away isin $1-) && ($istok(%away.users.nick,$nick,46) == $false) {
n148=    set %away.users.nick $addtok(%away.users.nick,$nick,46)
n149=    .timerlogcolor. $+ $network 1 10 login.color.nick
n150=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY)
n151=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,%tmp.aw),$nick,has been set as being,AWAY).status } }
n152=    halt
n153=  }
n154=  if (sets away isin $1-) && ($istok(%away.users.nick,$nick,46) == $false) {
n155=    set %away.users.nick $addtok(%away.users.nick,$nick,46)
n156=    .timerlogcolor. $+ $network 1 10 login.color.nick
n157=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY)
n158=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,%tmp.aw),$nick,has been set as being,AWAY).status } }
n159=    halt
n160=  }
n161=  if (is away isin $1-) && ($istok(%away.users.nick,$nick,46) == $false) {
n162=    set %away.users.nick $addtok(%away.users.nick,$nick,46)
n163=    .timerlogcolor. $+ $network 1 10 login.color.nick
n164=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY)
n165=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY).status } }
n166=    halt
n167=  }
n168=  if (is now away isin $1-) && ($istok(%away.users.nick,$nick,46) == $false) {
n169=    set %away.users.nick $addtok(%away.users.nick,$nick,46)
n170=    .timerlogcolor. $+ $network 1 10 login.color.nick
n171=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY)
n172=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY).status } }
n173=    halt
n174=  }
n175=  if (has gone away isin $1-) && ($istok(%away.users.nick,$nick,46) == $false) {
n176=    set %away.users.nick $addtok(%away.users.nick,$nick,46)
n177=    .timerlogcolor. $+ $network 1 10 login.color.nick
n178=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY)
n179=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,1),$nick,has been set as being,AWAY).status } }
n180=    halt
n181=  }
n182=  if (is back isin $1-) && ($istok(%away.users.nick,$nick,46) == $true) {
n183=    set %away.users.nick $remtok(%away.users.nick,$nick,1,46)
n184=    .timerlogcolor. $+ $network 1 10 login.color.nick
n185=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,BACK)
n186=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,1),$nick,has returned,BACK).status } }
n187=    halt
n188=  }
n189=  if (is now back isin $1-) && ($istok(%away.users.nick,$nick,46) == $true) {
n190=    set %away.users.nick $remtok(%away.users.nick,$nick,1,46)
n191=    .timerlogcolor. $+ $network 1 10 login.color.nick
n192=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,BACK)
n193=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,1),$nick,has returned,BACK).status } }
n194=    halt
n195=  }
n196=  if (has returned isin $1-) && ($istok(%away.users.nick,$nick,46) == $true) {
n197=    set %away.users.nick $remtok(%away.users.nick,$nick,1,46)
n198=    .timerlogcolor. $+ $network 1 10 login.color.nick
n199=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,BACK)
n200=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,1),$nick,has returned,BACK).status } }
n201=    halt
n202=  }
n203=  if (might be back isin $1-) && ($istok(%away.users.nick,$nick,46) == $true) {
n204=    set %away.users.nick $remtok(%away.users.nick,$nick,1,46)
n205=    .timerlogcolor. $+ $network 1 10 login.color.nick
n206=    echo -t $comchan($nick,1) $sys $report(Away,$comchan($nick,1),$nick,has been set as being,BACK)
n207=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Away,$comchan($nick,1),$nick,has returned,BACK).status } }
n208=    halt
n209=  }
n210=}
n211=#clonecheck off
n212=raw 352:*: {
n213=  if ($read(Clone_Check.txt, s, $4) == $null) {
n214=    ;if ($4 !isin %address) {
n215=    .write -a Clone_Check.txt $addtok(%address,$4,32)
n216=    ;set %address $addtok(%address,$4,32)
n217=  }
n218=  if (%addr [ $+ [ $4 ] ] != $null) { 
n219=    if (%clone [ $+ [ $4 ] ] == $null) { set %clone [ $+ [ $4 ] ] %addr [ $+ [ $4 ] ] $+ , $+ $6 }
n220=    else { set %clone [ $+ [ $4 ] ] %clone [ $+ [ $4 ] ] $+ , $+ $6 }
n221=  }
n222=  else { set %addr [ $+ [ $4 ] ] $6 }
n223=  halt
n224=}
n225=raw 315:*: {
n226=  updatenl
n227=  .disable #clonecheck
n228=  set %a 1
n229=  :loop
n230=  set %token $read(Clone_Check.txt, n, %a)
n231=  if (%token == $null) { goto end } 
n232=  else { 
n233=    if (%clone [ $+ [ %token ] ]  != $null) {
n234=      inc %total
n235=      inc %a
n236=      $report(Clones,%clone [ $+ [ %token ] ],$null,found at,*!*@ $+ %token).active
n237=      unset %clone [ $+ [ %token ] ]
n238=      unset %addr [ $+ [ %token ] ]
n239=      goto loop 
n240=    }
n241=    else { 
n242=      unset %addr [ $+ [ %token ] ]
n243=      inc %a
n244=      goto loop 
n245=    }
n246=  }
n247=  :end
n248=  $report($null,$null,Done).active
n249=  $report($chain).active
n250=  unset %a %addr* %clone* %token %total
n251=  .remove Clone_Check.txt
n252=  .disable #clonecheck
n253=  halt
n254=}
n255=#clonecheck end
n256=#serverclonecheck off
n257=raw 352:*: {
n258=  if ($read(Clone_Check.txt, s, $4) == $null) {
n259=    ;if ($4 !isin %address) {
n260=    .write -a Clone_Check.txt $addtok(%address,$4,32)
n261=    ;set %address $addtok(%address,$4,32)
n262=  }
n263=  if (%addr [ $+ [ $4 ] ] != $null) { 
n264=    if (%clone [ $+ [ $4 ] ] == $null) { set %clone [ $+ [ $4 ] ] %addr [ $+ [ $4 ] ] $+ , $+ $6 }
n265=    else { set %clone [ $+ [ $4 ] ] %clone [ $+ [ $4 ] ] $+ , $+ $6 }
n266=  }
n267=  else { set %addr [ $+ [ $4 ] ] $6 }
n268=  halt
n269=}
n270=raw 315:*: {
n271=  updatenl
n272=  .disable #serverclonecheck
n273=  set %a 1
n274=  :loop
n275=  set %token $read(Clone_Check.txt, n, %a)
n276=  if (%token == $null) { goto end } 
n277=  else { 
n278=    if (%clone [ $+ [ %token ] ]  != $null) {
n279=      inc %total
n280=      inc %a
n281=      $report(Clones,%clone [ $+ [ %token ] ],$null,found at,*!*@ $+ %token).active
n282=      unset %clone [ $+ [ %token ] ]
n283=      unset %addr [ $+ [ %token ] ]
n284=      goto loop 
n285=    }
n286=    else { 
n287=      unset %addr [ $+ [ %token ] ]
n288=      inc %a
n289=      goto loop 
n290=    }
n291=  }
n292=  :end
n293=  $report($null,$null,Done).active
n294=  $report($chain).active
n295=  unset %a %addr* %clone* %token %total
n296=  .remove Clone_Check.txt
n297=  .disable #serverclonecheck
n298=  halt
n299=}
n300=#serverclonecheck end
n301=#propscan off
n302=raw 818:*: {
n303=  if $3 == Lag {
n304=    %propdisplay $sys $report($null,$3,$null,$4 secs)
n305=    halt
n306=  }
n307=  if $3 == OID && $4 == 0 {
n308=    %propdisplay $sys $report($null,$3,$null,Object Identifier not supported)
n309=    halt
n310=  }
n311=  if $3 == Creation {
n312=    %propdisplay $sys $report($null,$3,$null,$asctime($4))
n313=    halt
n314=  }
n315=  if (\n isin $4-) {
n316=    set %n 1
n317=    :loop
n318=    set %num.of.tokens $gettok($4-,0,92)
n319=    if (%n > %num.of.tokens) { halt }
n320=    if (%n == 1) { %propdisplay $sys $report($null,$3,$null,$gettok($4-,%n,92)) }
n321=    if (%n > 1) { %propdisplay $sys $report($null,$3,$null,$mid($gettok($4-,%n,92),2,$mid($gettok($4-,%n,92),2,0))) }
n322=    inc %n
n323=    goto loop
n324=  }
n325=  else { %propdisplay $sys $report($null,$3,$null,$4-) | halt }
n326=}
n327=raw 819:*: {
n328=  %propdisplay $sys $report(Done)
n329=  %propdisplay $sys $report($chain)
n330=  unset %propdisplay
n331=  .disable #propscan
n332=  halt
n333=}
n334=#propscan end
n335=alias list {
n336=  if ($key(settings,ircx) == OFF) { .raw list $1- }
n337=  if ($key(settings,ircx) == ON) {
n338=    if ($1 != $null) {
n339=      if (> isin $1) && ($2 == $null) { listx $1 | halt }
n340=      if (> isin $1) && (< isin $2) { listx $1 $2 | halt }
n341=      if (< isin $1) && ($2 == $null) { listx $1 | halt }
n342=      if (< isin $1) && (> isin $2) { listx $2 $1 | halt }
n343=      if (-min isin $1) && ($3 == $null) { listx > $+ $calc($2 - 1) | halt }
n344=      if (-min isin $1) && (-max isin $3) { listx > $+ $calc($2 - 1) < $+ $calc($4 + 1) | halt }
n345=      if (-max isin $1) && ($3 == $null) { listx < $+ $calc($2 + 1) | halt }
n346=      if (-max isin $1) && (-min isin $3) { listx > $+ $calc($4 - 1) < $+ $calc($2 + 1) | halt }
n347=      if ($chr(35) isin $1) { listx N=* $+ $1 $+ * | halt }
n348=      if (N= isin $1) { listx N=* $+ $remove($1,N=) $+ * | halt }
n349=      if (T= isin $1) { listx T=* $+ $remove($1,T=) $+ * | halt }
n350=      if (S= isin $1) { listx S=* $+ $remove($1,S=) $+ * | halt }
n351=      if (L= isin $1) { listx L=* $+ $remove($1,L=) $+ * | halt }
n352=      if (R= isin $1) { listx $1 | halt }
n353=      if ($2 != $null) { listx $1- | halt }
n354=      else { listx N=* $+ $1 $+ * }
n355=    }
n356=    else { 
n357=      $report(List,$null,Help,/list #/#,more than/less than NUM members).active
n358=      $report(List,$null,Help,/list N=?/T=?/S=?/L=?,name/topic/subject/language text search).active
n359=      listx
n360=    }
n361=  }
n362=}
n363=#cycleforops off
n364=on !1:PART:#: {
n365=  .names #
n366=  if ($nick($chan,0) <= 2) {
n367=    if ($key(settings,ircx) == ON) && ($me !isowner $chan(#)) { 
n368=      cycle
n369=      $report(Auto-Cycle,$chan,is empty,Auto-Cycle to get Ops).status
n370=      beep
n371=    }
n372=    if ($key(settings,ircx) == OFF) && ($me !isop $chan(#)) {
n373=      cycle
n374=      $report(Auto-Cycle,$chan,is empty,Auto-Cycle to get Ops).status
n375=      beep
n376=    }
n377=  }
n378=}
n379=#cycleforops end
n380=on ^*:ERROR:*:{ $report(Server Error,$null,$null,reported as follows,$1-).active | halt }
n381=on ^*:QUIT: {
n382=  haltdef
n383=  var %tmp.quit = 1
n384=  while (%tmp.quit <= $comchan($nick,0)) { 
n385=    if ($master(settings,bnote) == ON) { echo -t $comchan($nick,%tmp.quit) $sys $report(Quit,$null,$nick,$null,$1-) }
n386=    inc %tmp.quit
n387=    if (%tmp.quit > $comchan($nick,0)) { break } 
n388=  }
n389=  if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Quit,$null,$nick,$null,$1-).status } }
n390=  if ($nick == $me) && ($server != $null) { cycleall }
n391=  .timerADJUST. $+ $network 1 30 adjust
n392=  if ($istok(%away.users.nick,$nick,46) == $true) {
n393=    .set %away.users.nick $remtok(%away.users.nick,$nick,1,46)
n394=    .timerlogcolor. $+ $network 1 10 login.color.nick
n395=  }  
n396=  if ($key(settings,botnick) != $null) && ($istok($key(settings,botnick),$nick,44) == $true) {
n397=    keywrite settings botnick $remtok($key(settings,botnick),$nick,1,44)
n398=    $report(Bot Quit,Removed registered Bot,$null,$nick).active
n399=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Bot Quit,Removed registered Bot,$null,$nick).status } }
n400=  }
n401=}
n402=on ^*:PART:#: {
n403=  haltdef
n404=  if ($key(settings,attempt.PART) <= 5) {
n405=    ssflood PART $nick
n406=    if ($master(settings,bnote) == ON) { $report(Part,$null,$nick,$address,$1-).chan }
n407=    if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Part,$chan,$nick,$address,$1-).status } }
n408=  }
n409=  ;.timerADJUST. $+ $network 1 30 adjust
n410=  if ($key(#,lastin) == $nick) {
n411=    keywrite # lastin ""
n412=    keywrite # lastinIP ""
n413=  }
n414=  if ($istok(%away.users.nick,$nick,46) == $true) { set %away.users.nick $remtok(%away.users.nick,$nick,1,46) | .timerlogcolor. $+ $network 1 10 login.color.nick | halt }  
n415=  return
n416=}
n417=on ^*:BAN:#: { 
n418=  /fixban # +b
n419=  if ($banmask iswm $address($me,5)) {
n420=    .cs unban $chan $me
n421=    .cs invite $chan $me
n422=  } 
n423=  return
n424=}
n425=on ^*:UNBAN:#:{
n426=  /fixban # -b
n427=  return
n428=}
n429=on ^1:TOPIC:#: {
n430=  haltdef
n431=  if ($1- == $null) { var %tmp.tp1 = Topic has been cleared }
n432=  else { var %tmp.tp1 = Topic changed to | var %tmp.tp2 = $1- }
n433=  $report(Topic,$nick,$chan,%tmp.tp1,%tmp.tp2).chan
n434=  if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Topic,$nick,$chan,%tmp.tp1,%tmp.tp2).status } }
n435=  if ($nick == $me) { keywrite # topic $hex.ini($1-) | if ($key(#,topiclock) == $null) { keywrite # topiclock OFF } | halt }
n436=  if ($key(#,topiclock) == $null) { keywrite # topiclock OFF | halt }
n437=  if ($key(#,topiclock) == PROTECT) { halt }
n438=  if ($key(#,topiclock) == OFF) && ($nick(#,$me,q) != $null) { keywrite # topic $hex.ini($1-) | halt }
n439=  if ($key(#,topiclock) == OFF) && ($nick(#,$me,o) != $null) { keywrite # topic $hex.ini($1-) | halt }
n440=  if ($key(#,topiclock) == ON) {
n441=    if ($unhex.ini($key(#,topic)) == $1-) { halt }
n442=    if ($key(#,modemaster) == ON) { .raw mode # -o $nick | msg # $report($null,$null,System  Warning,If you change the topic you will be deop'd) }
n443=    .timerTOPLOCa. $+ $network 1 1 $report(Topic Lock,#,Active,Correcting topic).active
n444=    if ($master(settings,extra.info) == on) { IF (status !isin $window($active)) { .timerTOPLOCb. $+ $network 1 1 $report(Topic Lock,#,Active,Correcting topic).status } }
n445=    .timerTOPLOCc. $+ $network 1 1 .raw topic # : $+ $unhex.ini($key(#,topic))
n446=    halt
n447=  }
n448=  halt
n449=}
n450=on ^*:NICK: {
n451=  haltdef
n452=  var %tmp.nick = 1
n453=  while (%tmp.nick <= $comchan($newnick,0)) {
n454=    echo -t $comchan($newnick,%tmp.nick) $sys $report(Nick,$nick,$comchan($newnick,%tmp.nick),Will now be known as,$newnick)
n455=    inc %tmp.nick
n456=    if (%tmp.nick > $comchan($newnick,0))  { break }
n457=  }
n458=  if ($master(settings,extra.info) == ON) { IF (status !isin $window($active)) { $report(Nick,$nick,$null,Will now be known as,$newnick).status } }
n459=  .timerlogcolor. $+ $network 1 10 login.color.nick
n460=  if ($nick == $me) {
n461=    keywrite settings boss $me
n462=    remnick $newnick
n463=    if ($key(settings,recover) != $null) { recover $key(settings,recover) }
n464=    else { recover $newnick }
n465=    if ($key(settings,botnick) != $null) { .ctcp $key(settings,botnick) DO /set % $+ boss $newnick }
n466=  }
n467=  var %temp.nick.change = $chan(0)
n468=  var %temp.nick.change1 = 1
n469=  :nick.change.loop
n470=  if (%temp.nick.change1 > %temp.nick.change) { goto nick.change.out }
n471=  if ($key($chan(%temp.nick.change1),lastin) == $nick) { 
n472=    keywrite $chan(%temp.nick.change1) lastin $newnick
n473=    echo -t $chan(%temp.nick.change1) $sys $report(Last In,$nick,$chan(%temp.nick.change1),changed nicks to,$newnick, Updating.)
n474=  }
n475=  if ($istok(%away.users.nick,$nick,46) == $true) { 
n476=    set %away.users.nick $remtok(%away.users.nick,$nick,1,46)
n477=    set %away.users.nick $addtok(%away.users.nick,$newnick,46)
n478=    .timerlogcolor. $+ $network 1 10 login.color.nick
n479=    $report(Away User,$nick,#,Changed nicks to,$newnick,Updating Away colors).chan
n480=  }
n481=  inc %temp.nick.change1 
n482=  goto nick.change.loop
n483=  :nick.change.out
n484=  if ($istok($key(settings,botnick),$nick,44) == $true) { 
n485=    keywrite settings botnick $remtok($key(settings,botnick),$nick,1,44) 
n486=    keywrite settings botnick $addtok($key(settings,botnick),$newnick,44)
n487=    $report(Bot Nick,$nick,#,Registering Bot,$newnick, and dropping ,$nick).active
n488=  }
n489=}
